<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>New Tab</title>

    <link rel="stylesheet" href="./static/style.css">
    <!-- HTMX (optional, used for future actions like delete) -->
    <script src="https://unpkg.com/htmx.org@1.9.12" defer></script>

</head>
<body>
<div class="container">
    <ul id="links-list" class="links-list">
        {{ range .Links }}
        <li>
            <div class="link-info">
                <div class="link-preview">
                    <img src="{{ .Img }}" alt="Preview" loading="lazy" />
                </div>
                <div class="link-text">
                    <a href="{{ .Href }}" rel="noopener">
                        {{ GetDomainFromURL .Href }}
                    </a>
                    <small style="color: var(--text-muted); display:block;">ID: {{ .ID }} â€¢ Position: {{ .Position }}</small>
                </div>
            </div>

            <div class="actions">
                <button
                        hx-delete="/links/{{ .ID }}"
                        hx-target="closest li"
                        hx-swap="outerHTML swap:0.3s"
                        hx-confirm="Are you sure you want to delete this link?"
                >
                    Delete
                </button>
            </div>
        </li>
        {{ end }}

        {{ if not .Links }}
        <li class="no-results">No links found.</li>
        {{ end }}
    </ul>

    <div class="search-box">
        <form action="https://www.google.com/search" method="GET" role="search" aria-label="Google search" autocomplete="off">
            <input
                    type="text"
                    id="search"
                    placeholder="Search Google"
                    name="q"
                    autofocus
            />
        </form>
    </div>
</div>
</body>
</html>